DROP DATABASE IF EXISTS badminton_as2021;
CREATE DATABASE IF NOT EXISTS badminton_as2021;
USE badminton_as2021;

CREATE TABLE COACH (
COA_ID	   INTEGER       PRIMARY KEY, 
COA_FNAME  VARCHAR(50)   NOT NULL,
COA_LNAME  VARCHAR(50)   NOT NULL,
COA_AGE	   INTEGER       NOT NULL,
COA_GENDER VARCHAR(20)   NOT NULL,
COA_WEIGHT NUMERIC(4, 2) NOT NULL,
COA_HEIGHT NUMERIC(4, 2) NOT NULL,
COA_PHONE  VARCHAR(20) 	 NOT NULL
);

CREATE TABLE STAFF (
ST_ID	  INTEGER	PRIMARY KEY, 
ST_FNAME  VARCHAR(50) 	NOT NULL,
ST_LNAME  VARCHAR(50) 	NOT NULL,
ST_GENDER VARCHAR(20) 	NOT NULL, 
ST_PHONE  VARCHAR(20) 	NOT NULL
);

CREATE TABLE TIMESLOT(
TS_ID	 INTEGER PRIMARY KEY,
TS_START TIME 	 NOT NULL,
TS_END	 TIME 	 NOT NULL,
TS_DATE  DATE 	 NOT NULL
);

CREATE TABLE COURT (
CT_ID	  VARCHAR(5)  PRIMARY KEY,
CT_NAME   VARCHAR(50) NOT NUll
);

CREATE TABLE TEAM (
TM_ID 	  INTEGER 	PRIMARY KEY,
TM_NAME   VARCHAR(50) 	NOT NULL,
TM_TYPE   VARCHAR(50) 	NOT NULL,
TM_AMOUNT INTEGER 	NOT NULL,
COA_ID	  INTEGER,
CONSTRAINT TEAM_COA_ID_FK FOREIGN KEY (COA_ID) REFERENCES COACH (COA_ID) 
);

CREATE TABLE PLAYER(	
PY_ID 		INTEGER 	PRIMARY KEY,
PY_FNAME    	VARCHAR(50) 	NOT NULL,
PY_LNAME    	VARCHAR(50) 	NOT NULL,
PY_AGE         	INTEGER 	NOT NULL,
PY_GENDER   	VARCHAR(10) 	NOT NULL,
PY_WEIGHT   	NUMERIC(4, 2) 	NOT NULL,
PY_HEIGHT	NUMERIC(4, 2) 	NOT NULL,
PY_PHONE     	VARCHAR(20) 	NOT NULL,
TM_ID 		INTEGER,
CONSTRAINT PLAYER_TM_ID_FK  FOREIGN KEY (TM_ID) REFERENCES TEAM (TM_ID) 
);

CREATE TABLE MATCHES(
MT_ID		INTEGER PRIMARY KEY,
TS_ID 		INTEGER,
CT_ID 		varchar(5),
TM_IDA		INTEGER, 
TM_IDB 	INTEGER,
CONSTRAINT MATCHES_TS_ID_FK FOREIGN KEY (TS_ID) REFERENCES TIMESLOT(TS_ID),
CONSTRAINT MATCHES_CT_ID_FK FOREIGN KEY (CT_ID) REFERENCES COURT(CT_ID),
CONSTRAINT MATCHES_TM_IDA_FK FOREIGN KEY (TM_IDA) REFERENCES TEAM(TM_ID),
CONSTRAINT MATCHES_TM_IDB_FK FOREIGN KEY (TM_IDB) REFERENCES TEAM(TM_ID)
);

CREATE TABLE SETS (
SET_ID		INTEGER PRIMARY KEY,
SET_SCOREA	INTEGER NOT NULL,
SET_SCOREB	INTEGER NOT NULL,
MT_ID		INTEGER,
CONSTRAINT SET_MT_ID_FK FOREIGN KEY (MT_ID) REFERENCES MATCHES (MT_ID) 
);

CREATE TABLE ROLE(
MT_ID 	INTEGER,
ST_ID 	INTEGER,
PRIMARY KEY (MT_ID,ST_ID),
RL_DES	VARCHAR(100), 
CONSTRAINT ROLE_MT_ID_FK FOREIGN KEY (MT_ID) REFERENCES MATCHES (MT_ID),
CONSTRAINT ROLE_ST_ID_FK FOREIGN KEY (ST_ID) REFERENCES STAFF (ST_ID)
);


/* Loading data row */


/* COACH rows */
INSERT INTO COACH VALUES (1234, 'Gura', 'Gawr', 25, 'F', 47.05, 1.60, '012-654-7854');
INSERT INTO COACH VALUES (5678, 'Calliope', 'Mori', 28, 'M', 64.03, 1.85, '087-556-2894');
INSERT INTO COACH VALUES (9101, 'Amelia', 'Watson', 24, 'F', 48.00, 1.65, '069-558-4215');
INSERT INTO COACH VALUES (1213, 'Inanis', 'Ninomae', 30, 'M', 70.08, 1.90, '023-458-7956');
INSERT INTO COACH VALUES (1415, 'Kiara', 'Takanashi', 26, 'F', 46.05, 1.63, '011-458-7956');

/* STAFF rows */
INSERT INTO STAFF VALUES (1111, 'Apple', 'Pie', 'F', '010-001-0001');
INSERT INTO STAFF VALUES (1112, 'Banana', 'Frappe', 'M','020-002-0002');
INSERT INTO STAFF VALUES (1113, 'Caramel', 'Syrup', 'F', '030-003-0003');
INSERT INTO STAFF VALUES (1114, 'Dandelion', 'Flower', 'M', '040-004-0004');
INSERT INTO STAFF VALUES (1115, 'Excalibur', 'Sword', 'F', '050-005-0004');

/* TIMESLOT rows */
INSERT INTO TIMESLOT VALUES (1,'09:00:00','12:00:00','2021-08-01');
INSERT INTO TIMESLOT VALUES (2,'13:00:00','16:00:00','2021-08-01');
INSERT INTO TIMESLOT VALUES (3,'17:00:00','20:00:00','2021-08-01');
INSERT INTO TIMESLOT VALUES (4,'09:00:00','12:00:00','2021-08-03');
INSERT INTO TIMESLOT VALUES (5,'13:00:00','16:00:00','2021-08-03');
INSERT INTO TIMESLOT VALUES (6,'17:00:00','20:00:00','2021-08-03');

/* COURT rows */
INSERT INTO  COURT VALUES ('1A', 'Nagoya');
INSERT INTO  COURT VALUES ('2A', 'Aomori');
INSERT INTO  COURT VALUES ('1B', 'Chiba');
INSERT INTO  COURT VALUES ('2B', 'Fukui');
INSERT INTO  COURT VALUES ('3B', 'Kanazawa');

/* TEAM rows */
INSERT INTO TEAM  VALUES (1101, 'TH-MS', 'Men’s Singles', 1, 1234 );
INSERT INTO TEAM  VALUES (1102, 'TH-WS', 'Women’s Singles', 1, 1234 );
INSERT INTO TEAM  VALUES (1103, 'TH-WD', 'Women’s Doubles', 2,9101 );
INSERT INTO TEAM  VALUES (1104, 'TH-MD', 'Men’s Doubles', 2, 1213);
INSERT INTO TEAM  VALUES (1105, 'TH-MXD', 'Mixed Doubles', 2,1415 );

/* PLAYER rows */
INSERT INTO PLAYER VALUES(100,'Melisa','Schmidt',22,'Y',70.05,1.78,'023-458-987',1102);
INSERT INTO PLAYER VALUES(101,'Fannie','Underwood',30,'Y',67.85,1.75,'085-958-554',1103);
INSERT INTO PLAYER VALUES(102,'Sahra','Heath',26,'M',82.05,1.73,'093-738-6563',1103);
INSERT INTO PLAYER VALUES(103,'Taylah','Squires',20,'Y',75.23,1.82,'043-058-124',1101);
INSERT INTO PLAYER VALUES(105,'Sue','Hassan',22,'Y',79.95,1.75,'066-558-685',1105);
INSERT INTO PLAYER VALUES(106,'Tyreese','Anderson',25,'M',68.45,1.80,'087-955-457',1105);

/* MATCHES rows */
INSERT INTO MATCHES VALUES  (1, 1, '1A',1101,1102);
INSERT INTO MATCHES VALUES  (2, 2, '2A',1102,1103);
INSERT INTO MATCHES VALUES  (3,3, '1B',1103,1104);
INSERT INTO MATCHES VALUES  (4,3, '3B',1101,1105);
INSERT INTO MATCHES VALUES  (5,4, '2B',1104,1105);

/* SETS rows */
INSERT INTO SETS VALUES (1145, 22, 20, 1 );
INSERT INTO SETS VALUES (1146, 25, 23, 1);
INSERT INTO SETS VALUES (1147, 25, 23,2 );
INSERT INTO SETS VALUES (1148, 18, 20,2 );
INSERT INTO SETS VALUES (1149, 19, 21, 2);

/* ROLE rows */
INSERT INTO  ROLE VALUES (1,1111,'cleaning');
INSERT INTO  ROLE VALUES (1,1112,'referee');
INSERT INTO  ROLE VALUES (1,1113,'cleaning');
INSERT INTO  ROLE VALUES (1,1114,'referee');
INSERT INTO  ROLE VALUES (2,1115,'cleaning');


